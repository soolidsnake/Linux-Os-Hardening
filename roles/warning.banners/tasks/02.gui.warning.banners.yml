---

# GDM Warning Login Banner
- block:
  - name: Configure GDM login warning banner
    blockinfile: 
      path: "/etc/dconf/profile/gdm"
      block: |
        user-db:user
        system-db:gdm
        file-db:/usr/share/gdm/greeter-dconf-defaults"
      create: yes

  - file: 
      path: /etc/dconf/db/gdm.d/
      state: directory

  - blockinfile:
      path: "/etc/dconf/db/gdm.d/01-banner-message"
      block: |
        [org/gnome/login-screen]
        banner-message-enable=true
        banner-message-text='Authorized uses only. All activity may be monitored and reported.'
      create: yes

  - shell: dconf update


  become: yes
  when: ansible_env.GDMSESSION is defined


# We can add banners for other Desktops (Like XFCE, LXDE ...)